
TEST(ArcadeGameTest, HappyDay2 ) {
	std::string Base = "tests/filetests/HappyDay2/";
	std::string board_name = Base+"Speelveld.xml";
	std::string actions_name = Base+"Acties.xml";
	
	TiXmlDocument doc_board, doc_actions;

	bool board_loaded = doc_board.LoadFile(board_name);
	bool actions_loaded = doc_actions.LoadFile(actions_name);

	ASSERT_TRUE(board_loaded && actions_loaded) << "Failed to load xml files.";
	
	std::ofstream new_cout;
	new_cout.open(Base+"output.txt"); // TODO
	
	Game_parser gp(&new_cout, board_name, actions_name);
	Game* g = gp.parse_game(doc_board.FirstChildElement(), doc_actions.FirstChildElement());
	
	//ASSERT_TRUE(g.properlyInitialized());
	
	std::ofstream output_file;
	
	output_file.open(Base+"ResterendeBewegingen_begin.txt");
	g->write_actions(output_file);
	output_file.close();
	
	g->main_loop(new_cout); // TODO: with new_cout
	new_cout.close();
	
	output_file.open(Base+"HuidigSpeelveld.txt");
	g->board.write_board(output_file);
	output_file.close();
	
	output_file.open(Base+"ResterendeBewegingen_einde.txt");
	g->write_actions(output_file);
	output_file.close();
	
	EXPECT_TRUE(fileCompare(Base+"HuidigSpeelveld.txt", Base+"_HuidigSpeelveld.txt"));
	EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_begin.txt", Base+"_ResterendeBewegingen_begin.txt"));
    EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_einde.txt", Base+"_ResterendeBewegingen_einde.txt"));
	EXPECT_TRUE(fileCompare(Base+"output.txt", Base+"_output.txt"));
}


TEST(ArcadeGameTest, BarrelInWater ) {
	std::string Base = "tests/filetests/BarrelInWater/";
	std::string board_name = Base+"Speelveld.xml";
	std::string actions_name = Base+"Acties.xml";
	
	TiXmlDocument doc_board, doc_actions;

	bool board_loaded = doc_board.LoadFile(board_name);
	bool actions_loaded = doc_actions.LoadFile(actions_name);

	ASSERT_TRUE(board_loaded && actions_loaded) << "Failed to load xml files.";
	
	std::ofstream new_cout;
	new_cout.open(Base+"output.txt"); // TODO
	
	Game_parser gp(&new_cout, board_name, actions_name);
	Game* g = gp.parse_game(doc_board.FirstChildElement(), doc_actions.FirstChildElement());
	
	//ASSERT_TRUE(g.properlyInitialized());
	
	std::ofstream output_file;
	
	output_file.open(Base+"ResterendeBewegingen_begin.txt");
	g->write_actions(output_file);
	output_file.close();
	
	g->main_loop(new_cout); // TODO: with new_cout
	new_cout.close();
	
	output_file.open(Base+"HuidigSpeelveld.txt");
	g->board.write_board(output_file);
	output_file.close();
	
	output_file.open(Base+"ResterendeBewegingen_einde.txt");
	g->write_actions(output_file);
	output_file.close();
	
	EXPECT_TRUE(fileCompare(Base+"HuidigSpeelveld.txt", Base+"_HuidigSpeelveld.txt"));
	EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_begin.txt", Base+"_ResterendeBewegingen_begin.txt"));
    EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_einde.txt", Base+"_ResterendeBewegingen_einde.txt"));
	EXPECT_TRUE(fileCompare(Base+"output.txt", Base+"_output.txt"));
}


TEST(ArcadeGameTest, OpenGate ) {
	std::string Base = "tests/filetests/OpenGate/";
	std::string board_name = Base+"Speelveld.xml";
	std::string actions_name = Base+"Acties.xml";
	
	TiXmlDocument doc_board, doc_actions;

	bool board_loaded = doc_board.LoadFile(board_name);
	bool actions_loaded = doc_actions.LoadFile(actions_name);

	ASSERT_TRUE(board_loaded && actions_loaded) << "Failed to load xml files.";
	
	std::ofstream new_cout;
	new_cout.open(Base+"output.txt"); // TODO
	
	Game_parser gp(&new_cout, board_name, actions_name);
	Game* g = gp.parse_game(doc_board.FirstChildElement(), doc_actions.FirstChildElement());
	
	//ASSERT_TRUE(g.properlyInitialized());
	
	std::ofstream output_file;
	
	output_file.open(Base+"ResterendeBewegingen_begin.txt");
	g->write_actions(output_file);
	output_file.close();
	
	g->main_loop(new_cout); // TODO: with new_cout
	new_cout.close();
	
	output_file.open(Base+"HuidigSpeelveld.txt");
	g->board.write_board(output_file);
	output_file.close();
	
	output_file.open(Base+"ResterendeBewegingen_einde.txt");
	g->write_actions(output_file);
	output_file.close();
	
	EXPECT_TRUE(fileCompare(Base+"HuidigSpeelveld.txt", Base+"_HuidigSpeelveld.txt"));
	EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_begin.txt", Base+"_ResterendeBewegingen_begin.txt"));
    EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_einde.txt", Base+"_ResterendeBewegingen_einde.txt"));
	EXPECT_TRUE(fileCompare(Base+"output.txt", Base+"_output.txt"));
}


TEST(ArcadeGameTest, GateInWater ) {
	std::string Base = "tests/filetests/GateInWater/";
	std::string board_name = Base+"Speelveld.xml";
	std::string actions_name = Base+"Acties.xml";
	
	TiXmlDocument doc_board, doc_actions;

	bool board_loaded = doc_board.LoadFile(board_name);
	bool actions_loaded = doc_actions.LoadFile(actions_name);

	ASSERT_TRUE(board_loaded && actions_loaded) << "Failed to load xml files.";
	
	std::ofstream new_cout;
	new_cout.open(Base+"output.txt"); // TODO
	
	Game_parser gp(&new_cout, board_name, actions_name);
	Game* g = gp.parse_game(doc_board.FirstChildElement(), doc_actions.FirstChildElement());
	
	//ASSERT_TRUE(g.properlyInitialized());
	
	std::ofstream output_file;
	
	output_file.open(Base+"ResterendeBewegingen_begin.txt");
	g->write_actions(output_file);
	output_file.close();
	
	g->main_loop(new_cout); // TODO: with new_cout
	new_cout.close();
	
	output_file.open(Base+"HuidigSpeelveld.txt");
	g->board.write_board(output_file);
	output_file.close();
	
	output_file.open(Base+"ResterendeBewegingen_einde.txt");
	g->write_actions(output_file);
	output_file.close();
	
	EXPECT_TRUE(fileCompare(Base+"HuidigSpeelveld.txt", Base+"_HuidigSpeelveld.txt"));
	EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_begin.txt", Base+"_ResterendeBewegingen_begin.txt"));
    EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_einde.txt", Base+"_ResterendeBewegingen_einde.txt"));
	EXPECT_TRUE(fileCompare(Base+"output.txt", Base+"_output.txt"));
}


TEST(ArcadeGameTest, ButtonInWater ) {
	std::string Base = "tests/filetests/ButtonInWater/";
	std::string board_name = Base+"Speelveld.xml";
	std::string actions_name = Base+"Acties.xml";
	
	TiXmlDocument doc_board, doc_actions;

	bool board_loaded = doc_board.LoadFile(board_name);
	bool actions_loaded = doc_actions.LoadFile(actions_name);

	ASSERT_TRUE(board_loaded && actions_loaded) << "Failed to load xml files.";
	
	std::ofstream new_cout;
	new_cout.open(Base+"output.txt"); // TODO
	
	Game_parser gp(&new_cout, board_name, actions_name);
	Game* g = gp.parse_game(doc_board.FirstChildElement(), doc_actions.FirstChildElement());
	
	//ASSERT_TRUE(g.properlyInitialized());
	
	std::ofstream output_file;
	
	output_file.open(Base+"ResterendeBewegingen_begin.txt");
	g->write_actions(output_file);
	output_file.close();
	
	g->main_loop(new_cout); // TODO: with new_cout
	new_cout.close();
	
	output_file.open(Base+"HuidigSpeelveld.txt");
	g->board.write_board(output_file);
	output_file.close();
	
	output_file.open(Base+"ResterendeBewegingen_einde.txt");
	g->write_actions(output_file);
	output_file.close();
	
	EXPECT_TRUE(fileCompare(Base+"HuidigSpeelveld.txt", Base+"_HuidigSpeelveld.txt"));
	EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_begin.txt", Base+"_ResterendeBewegingen_begin.txt"));
    EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_einde.txt", Base+"_ResterendeBewegingen_einde.txt"));
	EXPECT_TRUE(fileCompare(Base+"output.txt", Base+"_output.txt"));
}


TEST(ArcadeGameTest, HappyDay ) {
	std::string Base = "tests/filetests/HappyDay/";
	std::string board_name = Base+"Speelveld.xml";
	std::string actions_name = Base+"Acties.xml";
	
	TiXmlDocument doc_board, doc_actions;

	bool board_loaded = doc_board.LoadFile(board_name);
	bool actions_loaded = doc_actions.LoadFile(actions_name);

	ASSERT_TRUE(board_loaded && actions_loaded) << "Failed to load xml files.";
	
	std::ofstream new_cout;
	new_cout.open(Base+"output.txt"); // TODO
	
	Game_parser gp(&new_cout, board_name, actions_name);
	Game* g = gp.parse_game(doc_board.FirstChildElement(), doc_actions.FirstChildElement());
	
	//ASSERT_TRUE(g.properlyInitialized());
	
	std::ofstream output_file;
	
	output_file.open(Base+"ResterendeBewegingen_begin.txt");
	g->write_actions(output_file);
	output_file.close();
	
	g->main_loop(new_cout); // TODO: with new_cout
	new_cout.close();
	
	output_file.open(Base+"HuidigSpeelveld.txt");
	g->board.write_board(output_file);
	output_file.close();
	
	output_file.open(Base+"ResterendeBewegingen_einde.txt");
	g->write_actions(output_file);
	output_file.close();
	
	EXPECT_TRUE(fileCompare(Base+"HuidigSpeelveld.txt", Base+"_HuidigSpeelveld.txt"));
	EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_begin.txt", Base+"_ResterendeBewegingen_begin.txt"));
    EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_einde.txt", Base+"_ResterendeBewegingen_einde.txt"));
	EXPECT_TRUE(fileCompare(Base+"output.txt", Base+"_output.txt"));
}


TEST(ArcadeGameTest, WaterKills ) {
	std::string Base = "tests/filetests/WaterKills/";
	std::string board_name = Base+"Speelveld.xml";
	std::string actions_name = Base+"Acties.xml";
	
	TiXmlDocument doc_board, doc_actions;

	bool board_loaded = doc_board.LoadFile(board_name);
	bool actions_loaded = doc_actions.LoadFile(actions_name);

	ASSERT_TRUE(board_loaded && actions_loaded) << "Failed to load xml files.";
	
	std::ofstream new_cout;
	new_cout.open(Base+"output.txt"); // TODO
	
	Game_parser gp(&new_cout, board_name, actions_name);
	Game* g = gp.parse_game(doc_board.FirstChildElement(), doc_actions.FirstChildElement());
	
	//ASSERT_TRUE(g.properlyInitialized());
	
	std::ofstream output_file;
	
	output_file.open(Base+"ResterendeBewegingen_begin.txt");
	g->write_actions(output_file);
	output_file.close();
	
	g->main_loop(new_cout); // TODO: with new_cout
	new_cout.close();
	
	output_file.open(Base+"HuidigSpeelveld.txt");
	g->board.write_board(output_file);
	output_file.close();
	
	output_file.open(Base+"ResterendeBewegingen_einde.txt");
	g->write_actions(output_file);
	output_file.close();
	
	EXPECT_TRUE(fileCompare(Base+"HuidigSpeelveld.txt", Base+"_HuidigSpeelveld.txt"));
	EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_begin.txt", Base+"_ResterendeBewegingen_begin.txt"));
    EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_einde.txt", Base+"_ResterendeBewegingen_einde.txt"));
	EXPECT_TRUE(fileCompare(Base+"output.txt", Base+"_output.txt"));
}


TEST(ArcadeGameTest, AttackMonster ) {
	std::string Base = "tests/filetests/AttackMonster/";
	std::string board_name = Base+"Speelveld.xml";
	std::string actions_name = Base+"Acties.xml";
	
	TiXmlDocument doc_board, doc_actions;

	bool board_loaded = doc_board.LoadFile(board_name);
	bool actions_loaded = doc_actions.LoadFile(actions_name);

	ASSERT_TRUE(board_loaded && actions_loaded) << "Failed to load xml files.";
	
	std::ofstream new_cout;
	new_cout.open(Base+"output.txt"); // TODO
	
	Game_parser gp(&new_cout, board_name, actions_name);
	Game* g = gp.parse_game(doc_board.FirstChildElement(), doc_actions.FirstChildElement());
	
	//ASSERT_TRUE(g.properlyInitialized());
	
	std::ofstream output_file;
	
	output_file.open(Base+"ResterendeBewegingen_begin.txt");
	g->write_actions(output_file);
	output_file.close();
	
	g->main_loop(new_cout); // TODO: with new_cout
	new_cout.close();
	
	output_file.open(Base+"HuidigSpeelveld.txt");
	g->board.write_board(output_file);
	output_file.close();
	
	output_file.open(Base+"ResterendeBewegingen_einde.txt");
	g->write_actions(output_file);
	output_file.close();
	
	EXPECT_TRUE(fileCompare(Base+"HuidigSpeelveld.txt", Base+"_HuidigSpeelveld.txt"));
	EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_begin.txt", Base+"_ResterendeBewegingen_begin.txt"));
    EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_einde.txt", Base+"_ResterendeBewegingen_einde.txt"));
	EXPECT_TRUE(fileCompare(Base+"output.txt", Base+"_output.txt"));
}


TEST(ArcadeGameTest, MonsterDeath ) {
	std::string Base = "tests/filetests/MonsterDeath/";
	std::string board_name = Base+"Speelveld.xml";
	std::string actions_name = Base+"Acties.xml";
	
	TiXmlDocument doc_board, doc_actions;

	bool board_loaded = doc_board.LoadFile(board_name);
	bool actions_loaded = doc_actions.LoadFile(actions_name);

	ASSERT_TRUE(board_loaded && actions_loaded) << "Failed to load xml files.";
	
	std::ofstream new_cout;
	new_cout.open(Base+"output.txt"); // TODO
	
	Game_parser gp(&new_cout, board_name, actions_name);
	Game* g = gp.parse_game(doc_board.FirstChildElement(), doc_actions.FirstChildElement());
	
	//ASSERT_TRUE(g.properlyInitialized());
	
	std::ofstream output_file;
	
	output_file.open(Base+"ResterendeBewegingen_begin.txt");
	g->write_actions(output_file);
	output_file.close();
	
	g->main_loop(new_cout); // TODO: with new_cout
	new_cout.close();
	
	output_file.open(Base+"HuidigSpeelveld.txt");
	g->board.write_board(output_file);
	output_file.close();
	
	output_file.open(Base+"ResterendeBewegingen_einde.txt");
	g->write_actions(output_file);
	output_file.close();
	
	EXPECT_TRUE(fileCompare(Base+"HuidigSpeelveld.txt", Base+"_HuidigSpeelveld.txt"));
	EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_begin.txt", Base+"_ResterendeBewegingen_begin.txt"));
    EXPECT_TRUE(fileCompare(Base+"ResterendeBewegingen_einde.txt", Base+"_ResterendeBewegingen_einde.txt"));
	EXPECT_TRUE(fileCompare(Base+"output.txt", Base+"_output.txt"));
}

